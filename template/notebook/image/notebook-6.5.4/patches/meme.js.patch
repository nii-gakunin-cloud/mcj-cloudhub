4c4,5
< ], function($, Jupyter) {
---
>     'base/js/utils',
> ], function($, Jupyter, utils) {
9a11,34
> 
>         var _get_cookie = function (name) {
>             // from tornado docs: http://www.tornadoweb.org/en/stable/guide/security.html
>             var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
>             return r ? r[1] : undefined;
>         }
> 
>         var _add_auth_header = function (settings) {
>             /**
>              * Adds auth header to jquery ajax settings
>              */
>             settings = settings || {};
>             if (!settings.headers) {
>                 settings.headers = {};
>             }
>             if (!settings.headers.Authorization) {
>                 var xsrf_token = _get_cookie('_xsrf');
>                 if (xsrf_token) {
>                     settings.headers['X-XSRFToken'] = xsrf_token;
>                 }
>             }
>             return settings;
>         };
> 
17a43
>             headers: _add_auth_header().headers,
